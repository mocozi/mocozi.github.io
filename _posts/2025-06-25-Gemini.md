---
title: Gemini YAML
excerpt: 
tags: 
categories: 
toc: true
toc_sticky: true
date: 2025-06-25
last_modified_at: 2025-06-25
comments: true
author_profile: 
sidebar:
---
## Gemini에서 얻은 코드 


```

# 워크플로우의 이름
name: Sync Blog posts to mocozi.github.io

# 언제 이 워크플로우를 실행할 것인가를 정의
on:
  push:
    branches:
      # 'main' 브랜치에 푸시가 일어날 때만 실행
      - main
    paths:
      # 푸시된 파일 중에 '6. Blog/' 폴더 내에 변경사항이 있을 때만 실행
      # 이렇게 하면 관련 없는 노트 수정 시에는 Actions가 실행되지 않아 효율적입니다.
      - '6. Blog/**'

# 어떤 작업을 수행할 것인가를 정의
jobs:
  sync:
    # 작업은 최신 우분투(리눅스) 환경에서 실행
    runs-on: ubuntu-latest
    steps:
      # 1. 소스 저장소(mocozi/Obsidian)의 코드를 내려받습니다.
      - name: Checkout Obsidian Vault Repo
        uses: actions/checkout@v4
        with:
          # 소스 코드를 'source'라는 폴더에 내려받습니다.
          path: source

      # 2. 대상 저장소(mocozi/mocozi.github.io)의 코드를 내려받습니다.
      - name: Checkout Blog Repo
        uses: actions/checkout@v4
        with:
          # 대상 저장소의 주소를 명시합니다.
          repository: mocozi/mocozi.github.io
          # 2단계에서 등록한 Secret(PAT)을 사용하여 인증합니다.
          token: ${{ secrets.ACTIONS_PAT }}
          # 대상 코드를 'destination'이라는 폴더에 내려받습니다.
          path: destination

      # 3. 소스 폴더의 파일을 대상 폴더로 복사합니다.
      - name: Sync files to _posts
        run: |
          # rsync라는 강력한 복사 명령어를 사용합니다.
          # -a: 원본 파일의 속성을 유지하며 복사
          # -v: 복사되는 파일 목록을 보여줌
          # --delete: 원본(6. Blog)에 없는 파일은 대상(_posts)에서도 삭제하여 완벽하게 동기화
          rsync -av --delete source/'6. Blog'/ destination/_posts/

      # 4. 변경된 내용을 대상 저장소에 커밋하고 푸시합니다.
      - name: Commit and Push to Blog Repo
        run: |
          # 작업 디렉토리를 대상 저장소를 내려받은 'destination' 폴더로 변경
          cd destination
          
          # git에 커밋할 사용자 정보를 설정 (봇이 작업했음을 명시)
          git config user.name "GitHub Actions Bot"
          git config user.email "actions@github.com"
          
          # git status --porcelain으로 변경된 파일이 있는지 확인합니다.
          # 변경된 파일이 없으면, 불필요한 커밋을 만들지 않고 작업을 종료합니다.
          if [[ -z $(git status --porcelain) ]]; then
            echo "No changes to commit"
          else
            # _posts 폴더의 모든 변경사항을 스테이징
            git add _posts
            # 커밋 메시지 작성
            git commit -m "docs: Update Blog posts from Obsidian Vault"
            # 변경사항을 원격 저장소로 푸시
            git push
          fi
          

```


--delete: 원본(6. Blog)에 없는 파일은 대상(_posts)에서도 삭제하여 완벽하게 동기화


>[!caution]
>반박시 당신의 말이 옳다.
